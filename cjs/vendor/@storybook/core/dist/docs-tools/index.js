"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const O=require("../../../../jsdoc-type-pratt-parser/dist/index.js");var Ie=Object.defineProperty,a=(e,t)=>Ie(e,"name",{value:t,configurable:!0});const{UnknownArgTypesError:We}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var Be=a(e=>e.name==="literal","isLiteral"),Ue=a(e=>e.value.replace(/['|"]/g,""),"toEnumOption"),qe=a(e=>{switch(e.type){case"function":return{name:"function"};case"object":let t={};return e.signature.properties.forEach(n=>{t[n.key]=v(n.value)}),{name:"object",value:t};default:throw new We({type:e,language:"Flow"})}},"convertSig"),v=a(e=>{let{name:t,raw:n}=e,r={};switch(typeof n<"u"&&(r.raw=n),e.name){case"literal":return{...r,name:"other",value:e.value};case"string":case"number":case"symbol":case"boolean":return{...r,name:t};case"Array":return{...r,name:"array",value:e.elements.map(v)};case"signature":return{...r,...qe(e)};case"union":return e.elements?.every(Be)?{...r,name:"enum",value:e.elements?.map(Ue)}:{...r,name:t,value:e.elements?.map(v)};case"intersection":return{...r,name:t,value:e.elements?.map(v)};default:return{...r,name:"other",value:t}}},"convert");function I(e,t){let n={},r=Object.keys(e);for(let s=0;s<r.length;s++){let i=r[s],l=e[i];n[i]=t(l,i,e)}return n}a(I,"mapValues");var W=/^['"]|['"]$/g,ze=a(e=>e.replace(W,""),"trimQuotes"),Me=a(e=>W.test(e),"includesQuotes"),B=a(e=>{let t=ze(e);return Me(e)||Number.isNaN(Number(t))?t:Number(t)},"parseLiteral"),Ye=/^\(.*\) => /,y=a(e=>{let{name:t,raw:n,computed:r,value:s}=e,i={};switch(typeof n<"u"&&(i.raw=n),t){case"enum":{let c=r?s:s.map(u=>B(u.value));return{...i,name:t,value:c}}case"string":case"number":case"symbol":return{...i,name:t};case"func":return{...i,name:"function"};case"bool":case"boolean":return{...i,name:"boolean"};case"arrayOf":case"array":return{...i,name:"array",value:s&&y(s)};case"object":return{...i,name:t};case"objectOf":return{...i,name:t,value:y(s)};case"shape":case"exact":let l=I(s,c=>y(c));return{...i,name:"object",value:l};case"union":return{...i,name:"union",value:s.map(c=>y(c))};case"instanceOf":case"element":case"elementType":default:{if(t?.indexOf("|")>0)try{let m=t.split("|").map(p=>JSON.parse(p));return{...i,name:"enum",value:m}}catch{}let c=s?`${t}(${s})`:t,u=Ye.test(t)?"function":"other";return{...i,name:u,value:c}}}},"convert");const{UnknownArgTypesError:Ke}=__STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS__;var Qe=a(e=>{switch(e.type){case"function":return{name:"function"};case"object":let t={};return e.signature.properties.forEach(n=>{t[n.key]=h(n.value)}),{name:"object",value:t};default:throw new Ke({type:e,language:"Typescript"})}},"convertSig"),h=a(e=>{let{name:t,raw:n}=e,r={};switch(typeof n<"u"&&(r.raw=n),e.name){case"string":case"number":case"symbol":case"boolean":return{...r,name:t};case"Array":return{...r,name:"array",value:e.elements.map(h)};case"signature":return{...r,...Qe(e)};case"union":let s;return e.elements?.every(i=>i.name==="literal")?s={...r,name:"enum",value:e.elements?.map(i=>B(i.value))}:s={...r,name:t,value:e.elements?.map(h)},s;case"intersection":return{...r,name:t,value:e.elements?.map(h)};default:return{...r,name:"other",value:t}}},"convert"),D=a(e=>{let{type:t,tsType:n,flowType:r}=e;try{if(t!=null)return y(t);if(n!=null)return h(n);if(r!=null)return v(r)}catch(s){console.error(s)}return null},"convert"),Ge=["null","undefined"];function b(e){return Ge.some(t=>t===e)}a(b,"isDefaultValueBlacklisted");var U=a(e=>{if(!e)return"";if(typeof e=="string")return e;throw new Error(`Description: expected string, got: ${JSON.stringify(e)}`)},"str");function k(e){return!!e.__docgenInfo}a(k,"hasDocgen");function E(e){return e!=null&&Object.keys(e).length>0}a(E,"isValidDocgenSection");function j(e,t){return k(e)?e.__docgenInfo[t]:null}a(j,"getDocgenSection");function N(e){return k(e)?U(e.__docgenInfo.description):""}a(N,"getDocgenDescription");var f;(function(e){e.start="/**",e.nostart="/***",e.delim="*",e.end="*/"})(f=f||(f={}));function q(e){return/^\s+$/.test(e)}a(q,"isSpace");function z(e){let t=e.match(/\r+$/);return t==null?["",e]:[e.slice(-t[0].length),e.slice(0,-t[0].length)]}a(z,"splitCR");function g(e){let t=e.match(/^\s+/);return t==null?["",e]:[e.slice(0,t[0].length),e.slice(t[0].length)]}a(g,"splitSpace");function M(e){return e.split(/\n/)}a(M,"splitLines");function Y(e={}){return Object.assign({tag:"",name:"",type:"",optional:!1,description:"",problems:[],source:[]},e)}a(Y,"seedSpec");function K(e={}){return Object.assign({start:"",delimiter:"",postDelimiter:"",tag:"",postTag:"",name:"",postName:"",type:"",postType:"",description:"",end:"",lineEnd:""},e)}a(K,"seedTokens");var He=/^@\S+/;function Q({fence:e="```"}={}){let t=G(e),n=a((r,s)=>t(r)?!s:s,"toggleFence");return a(function(r){let s=[[]],i=!1;for(let l of r)He.test(l.tokens.description)&&!i?s.push([l]):s[s.length-1].push(l),i=n(l.tokens.description,i);return s},"parseBlock")}a(Q,"getParser");function G(e){return typeof e=="string"?t=>t.split(e).length%2===0:e}a(G,"getFencer");function H({startLine:e=0,markers:t=f}={}){let n=null,r=e;return a(function(s){let i=s,l=K();if([l.lineEnd,i]=z(i),[l.start,i]=g(i),n===null&&i.startsWith(t.start)&&!i.startsWith(t.nostart)&&(n=[],l.delimiter=i.slice(0,t.start.length),i=i.slice(t.start.length),[l.postDelimiter,i]=g(i)),n===null)return r++,null;let c=i.trimRight().endsWith(t.end);if(l.delimiter===""&&i.startsWith(t.delim)&&!i.startsWith(t.end)&&(l.delimiter=t.delim,i=i.slice(t.delim.length),[l.postDelimiter,i]=g(i)),c){let u=i.trimRight();l.end=i.slice(u.length-t.end.length),i=u.slice(0,-t.end.length)}if(l.description=i,n.push({number:r,source:s,tokens:l}),r++,c){let u=n.slice();return n=null,u}return null},"parseSource")}a(H,"getParser");function X({tokenizers:e}){return a(function(t){var n;let r=Y({source:t});for(let s of e)if(r=s(r),!((n=r.problems[r.problems.length-1])===null||n===void 0)&&n.critical)break;return r},"parseSpec")}a(X,"getParser");function Z(){return e=>{let{tokens:t}=e.source[0],n=t.description.match(/\s*(@(\S+))(\s*)/);return n===null?(e.problems.push({code:"spec:tag:prefix",message:'tag should start with "@" symbol',line:e.source[0].number,critical:!0}),e):(t.tag=n[1],t.postTag=n[3],t.description=t.description.slice(n[0].length),e.tag=n[2],e)}}a(Z,"tagTokenizer");function ee(e="compact"){let t=te(e);return n=>{let r=0,s=[];for(let[c,{tokens:u}]of n.source.entries()){let m="";if(c===0&&u.description[0]!=="{")return n;for(let p of u.description)if(p==="{"&&r++,p==="}"&&r--,m+=p,r===0)break;if(s.push([u,m]),r===0)break}if(r!==0)return n.problems.push({code:"spec:type:unpaired-curlies",message:"unpaired curlies",line:n.source[0].number,critical:!0}),n;let i=[],l=s[0][0].postDelimiter.length;for(let[c,[u,m]]of s.entries())u.type=m,c>0&&(u.type=u.postDelimiter.slice(l)+m,u.postDelimiter=u.postDelimiter.slice(0,l)),[u.postType,u.description]=g(u.description.slice(m.length)),i.push(u.type);return i[0]=i[0].slice(1),i[i.length-1]=i[i.length-1].slice(0,-1),n.type=t(i),n}}a(ee,"typeTokenizer");var Xe=a(e=>e.trim(),"trim");function te(e){return e==="compact"?t=>t.map(Xe).join(""):e==="preserve"?t=>t.join(`
`):e}a(te,"getJoiner");var Ze=a(e=>e&&e.startsWith('"')&&e.endsWith('"'),"isQuoted");function ne(){let e=a((t,{tokens:n},r)=>n.type===""?t:r,"typeEnd");return t=>{let{tokens:n}=t.source[t.source.reduce(e,0)],r=n.description.trimLeft(),s=r.split('"');if(s.length>1&&s[0]===""&&s.length%2===1)return t.name=s[1],n.name=`"${s[1]}"`,[n.postName,n.description]=g(r.slice(n.name.length)),t;let i=0,l="",c=!1,u;for(let p of r){if(i===0&&q(p))break;p==="["&&i++,p==="]"&&i--,l+=p}if(i!==0)return t.problems.push({code:"spec:name:unpaired-brackets",message:"unpaired brackets",line:t.source[0].number,critical:!0}),t;let m=l;if(l[0]==="["&&l[l.length-1]==="]"){c=!0,l=l.slice(1,-1);let p=l.split("=");if(l=p[0].trim(),p[1]!==void 0&&(u=p.slice(1).join("=").trim()),l==="")return t.problems.push({code:"spec:name:empty-name",message:"empty name",line:t.source[0].number,critical:!0}),t;if(u==="")return t.problems.push({code:"spec:name:empty-default",message:"empty default value",line:t.source[0].number,critical:!0}),t;if(!Ze(u)&&/=(?!>)/.test(u))return t.problems.push({code:"spec:name:invalid-default",message:"invalid default value syntax",line:t.source[0].number,critical:!0}),t}return t.optional=c,t.name=l,n.name=m,u!==void 0&&(t.default=u),[n.postName,n.description]=g(r.slice(n.name.length)),t}}a(ne,"nameTokenizer");function re(e="compact",t=f){let n=_(e);return r=>(r.description=n(r.source,t),r)}a(re,"descriptionTokenizer");function _(e){return e==="compact"?ae:e==="preserve"?ie:e}a(_,"getJoiner");function ae(e,t=f){return e.map(({tokens:{description:n}})=>n.trim()).filter(n=>n!=="").join(" ")}a(ae,"compactJoiner");var et=a((e,{tokens:t},n)=>t.type===""?e:n,"lineNo"),tt=a(({tokens:e})=>(e.delimiter===""?e.start:e.postDelimiter.slice(1))+e.description,"getDescription");function ie(e,t=f){if(e.length===0)return"";e[0].tokens.description===""&&e[0].tokens.delimiter===t.start&&(e=e.slice(1));let n=e[e.length-1];return n!==void 0&&n.tokens.description===""&&n.tokens.end.endsWith(t.end)&&(e=e.slice(0,-1)),e=e.slice(e.reduce(et,0)),e.map(tt).join(`
`)}a(ie,"preserveJoiner");function se({startLine:e=0,fence:t="```",spacing:n="compact",markers:r=f,tokenizers:s=[Z(),ee(n),ne(),re(n)]}={}){if(e<0||e%1>0)throw new Error("Invalid startLine");let i=H({startLine:e,markers:r}),l=Q({fence:t}),c=X({tokenizers:s}),u=_(n);return function(m){let p=[];for(let Ce of M(m)){let w=i(Ce);if(w===null)continue;let L=l(w),$=L.slice(1).map(c);p.push({description:u(L[0],r),tags:$,source:w,problems:$.reduce((Le,$e)=>Le.concat($e.problems),[])})}return p}}a(se,"getParser");function le(e){return e.start+e.delimiter+e.postDelimiter+e.tag+e.postTag+e.type+e.postType+e.name+e.postName+e.description+e.end+e.lineEnd}a(le,"join");function nt(){return e=>e.source.map(({tokens:t})=>le(t)).join(`
`)}a(nt,"getStringifier");function ue(e,t={}){return se(t)(e)}a(ue,"parse");function oe(e){return e!=null&&e.includes("@")}a(oe,"containsJsDoc");function ce(e){let t=`/**
`+(e??"").split(`
`).map(r=>` * ${r}`).join(`
`)+`
*/`,n=ue(t,{spacing:"preserve"});if(!n||n.length===0)throw new Error("Cannot parse JSDoc tags.");return n[0]}a(ce,"parse");var rt={tags:["param","arg","argument","returns","ignore","deprecated"]},pe=a((e,t=rt)=>{if(!oe(e))return{includesJsDoc:!1,ignore:!1};let n=ce(e),r=me(n,t.tags);return r.ignore?{includesJsDoc:!0,ignore:!0}:{includesJsDoc:!0,ignore:!1,description:n.description.trim(),extractedTags:r}},"parseJsDoc");function me(e,t){let n={params:null,deprecated:null,returns:null,ignore:!1};for(let r of e.tags)if(!(t!==void 0&&!t.includes(r.tag)))if(r.tag==="ignore"){n.ignore=!0;break}else switch(r.tag){case"param":case"arg":case"argument":{let s=de(r);s!=null&&(n.params==null&&(n.params=[]),n.params.push(s));break}case"deprecated":{let s=ge(r);s!=null&&(n.deprecated=s);break}case"returns":{let s=ye(r);s!=null&&(n.returns=s);break}}return n}a(me,"extractJsDocTags");function fe(e){return e.replace(/[\.-]$/,"")}a(fe,"normaliseParamName");function de(e){if(!e.name||e.name==="-")return null;let t=P(e.type);return{name:e.name,type:t,description:J(e.description),getPrettyName:a(()=>fe(e.name),"getPrettyName"),getTypeName:a(()=>t?R(t):null,"getTypeName")}}a(de,"extractParam");function ge(e){return e.name?x(e.name,e.description):null}a(ge,"extractDeprecated");function x(e,t){let n=e===""?t:`${e} ${t}`;return J(n)}a(x,"joinNameAndDescription");function J(e){let t=e.replace(/^- /g,"").trim();return t===""?null:t}a(J,"normaliseDescription");function ye(e){let t=P(e.type);return t?{type:t,description:x(e.name,e.description),getTypeName:a(()=>R(t),"getTypeName")}:null}a(ye,"extractReturns");var d=O.distExports.stringifyRules(),at=d.JsdocTypeObject;d.JsdocTypeAny=()=>"any";d.JsdocTypeObject=(e,t)=>`(${at(e,t)})`;d.JsdocTypeOptional=(e,t)=>t(e.element);d.JsdocTypeNullable=(e,t)=>t(e.element);d.JsdocTypeNotNullable=(e,t)=>t(e.element);d.JsdocTypeUnion=(e,t)=>e.elements.map(t).join("|");function P(e){try{return O.distExports.parse(e,"typescript")}catch{return null}}a(P,"extractType");function R(e){return O.distExports.transform(d,e)}a(R,"extractTypeName");function S(e){return e.length>90}a(S,"isTooLongForTypeSummary");function V(e){return e.length>50}a(V,"isTooLongForDefaultValueSummary");function o(e,t){return e===t?{summary:e}:{summary:e,detail:t}}a(o,"createSummaryValue");function ve(e,t){if(e!=null){let{value:n}=e;if(!b(n))return V(n)?o(t?.name,n):o(n)}return null}a(ve,"createDefaultValue");function A({name:e,value:t,elements:n,raw:r}){return t??(n!=null?n.map(A).join(" | "):r??e)}a(A,"generateUnionElement");function he({name:e,raw:t,elements:n}){return n!=null?o(n.map(A).join(" | ")):t!=null?o(t.replace(/^\|\s*/,"")):o(e)}a(he,"generateUnion");function be({type:e,raw:t}){return t!=null?o(t):o(e)}a(be,"generateFuncSignature");function Te({type:e,raw:t}){return t!=null?S(t)?o(e,t):o(t):o(e)}a(Te,"generateObjectSignature");function De(e){let{type:t}=e;return t==="object"?Te(e):be(e)}a(De,"generateSignature");function ke({name:e,raw:t}){return t!=null?S(t)?o(e,t):o(t):o(e)}a(ke,"generateDefault");function Se(e){if(e==null)return null;switch(e.name){case"union":return he(e);case"signature":return De(e);default:return ke(e)}}a(Se,"createType");var it=a((e,t)=>{let{flowType:n,description:r,required:s,defaultValue:i}=t;return{name:e,type:Se(n),required:s,description:r,defaultValue:ve(i??null,n??null)}},"createFlowPropDef");function we({defaultValue:e}){if(e!=null){let{value:t}=e;if(!b(t))return o(t)}return null}a(we,"createDefaultValue");function Oe({tsType:e,required:t}){if(e==null)return null;let n=e.name;return t||(n=n.replace(" | undefined","")),o(["Array","Record","signature"].includes(e.name)?e.raw:n)}a(Oe,"createType");var st=a((e,t)=>{let{description:n,required:r}=t;return{name:e,type:Oe(t),required:r,description:n,defaultValue:we(t)}},"createTsPropDef");function Ee(e){return e!=null?o(e.name):null}a(Ee,"createType");function je(e){let{computed:t,func:n}=e;return typeof t>"u"&&typeof n>"u"}a(je,"isReactDocgenTypescript");function Ne(e){return e?e.name==="string"?!0:e.name==="enum"?Array.isArray(e.value)&&e.value.every(({value:t})=>typeof t=="string"&&t[0]==='"'&&t[t.length-1]==='"'):!1:!1}a(Ne,"isStringValued");function _e(e,t){if(e!=null){let{value:n}=e;if(!b(n))return je(e)&&Ne(t)?o(JSON.stringify(n)):o(n)}return null}a(_e,"createDefaultValue");function F(e,t,n){let{description:r,required:s,defaultValue:i}=n;return{name:e,type:Ee(t),required:s,description:r,defaultValue:_e(i,t)}}a(F,"createBasicPropDef");function T(e,t){if(t?.includesJsDoc){let{description:n,extractedTags:r}=t;n!=null&&(e.description=t.description);let s={...r,params:r?.params?.map(i=>({name:i.getPrettyName(),description:i.description}))};Object.values(s).filter(Boolean).length>0&&(e.jsDocTags=s)}return e}a(T,"applyJsDocResult");var lt=a((e,t,n)=>{let r=F(e,t.type,t);return r.sbType=D(t),T(r,n)},"javaScriptFactory"),ut=a((e,t,n)=>{let r=st(e,t);return r.sbType=D(t),T(r,n)},"tsFactory"),ot=a((e,t,n)=>{let r=it(e,t);return r.sbType=D(t),T(r,n)},"flowFactory"),ct=a((e,t,n)=>{let r=F(e,{name:"unknown"},t);return T(r,n)},"unknownFactory"),xe=a(e=>{switch(e){case"JavaScript":return lt;case"TypeScript":return ut;case"Flow":return ot;default:return ct}},"getPropDefFactory"),Je=a(e=>e.type!=null?"JavaScript":e.flowType!=null?"Flow":e.tsType!=null?"TypeScript":"Unknown","getTypeSystem"),Pe=a(e=>{let t=Je(e[0]),n=xe(t);return e.map(r=>{let s=r;return r.type?.elements&&(s={...r,type:{...r.type,value:r.type.elements}}),C(s.name,s,t,n)})},"extractComponentSectionArray"),Re=a(e=>{let t=Object.keys(e),n=Je(e[t[0]]),r=xe(n);return t.map(s=>{let i=e[s];return i!=null?C(s,i,n,r):null}).filter(Boolean)},"extractComponentSectionObject"),pt=a((e,t)=>{let n=j(e,t);return E(n)?Array.isArray(n)?Pe(n):Re(n):[]},"extractComponentProps");function C(e,t,n,r){let s=pe(t.description);return s.includesJsDoc&&s.ignore?null:{propDef:r(e,t,s),jsDocTags:s.extractedTags,docgenInfo:t,typeSystem:n}}a(C,"extractProp");function Ve(e){return e!=null?N(e):""}a(Ve,"extractComponentDescription");const{combineParameters:mt}=__STORYBOOK_MODULE_PREVIEW_API__;var ft=a(e=>{let{component:t,argTypes:n,parameters:{docs:r={}}}=e,{extractArgTypes:s}=r,i=s&&t?s(t):{};return i?mt(i,n):n},"enhanceArgTypes"),Ae="storybook/docs",dt=`${Ae}/snippet-rendered`,Fe=(e=>(e.AUTO="auto",e.CODE="code",e.DYNAMIC="dynamic",e))(Fe||{});exports.ADDON_ID=Ae;exports.SNIPPET_RENDERED=dt;exports.SourceType=Fe;exports.convert=D;exports.createSummaryValue=o;exports.enhanceArgTypes=ft;exports.extractComponentDescription=Ve;exports.extractComponentProps=pt;exports.extractComponentSectionArray=Pe;exports.extractComponentSectionObject=Re;exports.getDocgenDescription=N;exports.getDocgenSection=j;exports.hasDocgen=k;exports.isDefaultValueBlacklisted=b;exports.isTooLongForDefaultValueSummary=V;exports.isTooLongForTypeSummary=S;exports.isValidDocgenSection=E;exports.parseJsDoc=pe;exports.str=U;

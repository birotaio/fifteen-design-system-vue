"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("../../core/dist/docs-tools/index.js"),$=require("vue"),{addons:C}=__STORYBOOK_MODULE_PREVIEW_API__;var _=["props","events","slots","exposed","expose"],j=e=>{if(!m.hasDocgen(e))return null;let r="exposed"in e.__docgenInfo?"vue-component-meta":"vue-docgen-api",i={};return _.forEach(a=>{m.extractComponentProps(e,a).forEach(s=>{let n;if(r==="vue-docgen-api"){let t=s.docgenInfo;n=v(t,a,s)}else{let t=s.docgenInfo;n=N(t,a)}!n||i[n.name]||(["events","expose","exposed"].includes(a)&&(n.control={disable:!0}),i[n.name]=n)})}),i},v=(e,r,i)=>{let a,s;if(r==="events"&&(a=e.type?.names.join(),s={name:"other",value:a??"",required:!1}),r==="slots"){let t=e.bindings?.filter(l=>!!l.name).map(l=>`${l.name}: ${l.type?.name??"unknown"}`).join("; ");a=t?`{ ${t} }`:void 0,s={name:"other",value:a??"",required:!1}}if(r==="props"){let t=e;if(a=t.type?.name,s=i?m.convert(i.docgenInfo):{name:"other",value:a},t.type&&"elements"in t.type&&Array.isArray(t.type.elements)&&t.type.elements.length>0){let l=t.type.elements.map(o=>o.name);a==="Array"&&(a=`${l.length===1?l[0]:`(${l.join(" | ")})`}[]`),a==="union"?a=l.join(" | "):a==="intersection"&&(a=l.join(" & "))}}let n="required"in e?e.required??!1:!1;return{name:e.name,description:e.description,type:s?{...s,required:n}:{name:"other",value:a??""},table:{type:a?{summary:a}:void 0,defaultValue:i?.propDef.defaultValue??void 0,jsDocTags:i?.propDef.jsDocTags,category:r}}},N=(e,r)=>{if("global"in e&&e.global)return;let i={summary:e.type.replace(" | undefined","")};if(r==="props"){let a=e,s=a.default?{summary:a.default}:void 0;return{name:a.name,description:E(a.description,a.tags),defaultValue:s,type:c(a),table:{type:i,defaultValue:s,category:r}}}else return{name:e.name,description:"description"in e?e.description:"",type:{name:"other",value:e.type},table:{type:i,category:r}}},c=e=>{let r=e.schema,i=e.required,a={name:"other",value:e.type,required:i},s=["string","number","function","boolean","symbol"];if(typeof r=="string")return s.includes(r)?{name:r,required:i}:a;switch(r.kind){case"enum":{let n=r.schema?.filter(t=>t!=="undefined")??[];return O(n)?{name:"boolean",required:i}:T(n)||A(n)?{name:"enum",value:n.map(t=>t.replace(/"/g,"")),required:i}:n.length===1?c({schema:n[0],type:e.type,required:i}):(n.length>2&&n.includes("true")&&n.includes("false")&&(n=n.filter(t=>t!=="true"&&t!=="false"),n.push("boolean")),{name:"union",value:n.map(t=>c(typeof t=="object"?{schema:t,type:t.type,required:!1}:{schema:t,type:t,required:!1})),required:i})}case"array":{let n=r.schema?.filter(t=>t!=="undefined")??[];return n.length===0?a:n.length===1?{name:"array",value:c({schema:n[0],type:e.type,required:!1}),required:i}:{name:"union",value:n.map(t=>c(typeof t=="object"?{schema:t,type:t.type,required:!1}:{schema:t,type:t,required:!1})),required:i}}case"object":return{name:"object",value:{},required:i};default:return a}},E=(e,r)=>!r?.length||!e?e??"":`${r.map(i=>`@${i.name}: ${i.text}`).join("<br>")}<br><br>${e}`,T=e=>e.every(r=>typeof r=="string"&&r.startsWith('"')&&r.endsWith('"')),A=e=>e.every(r=>typeof r=="string"&&r.includes(".")),O=e=>e.length===2&&e.includes("true")&&e.includes("false"),V=(e,r)=>{let i=e();if(q(r))return i;let a=C.getChannel();return $.watch(()=>r.args,()=>{let s=D(r);a.emit(m.SNIPPET_RENDERED,{id:r.id,args:r.args,source:s,format:"vue"})},{immediate:!0,deep:!0}),i},D=e=>{let r={imports:{},scriptVariables:{}},{displayName:i,slotNames:a,eventNames:s}=M(e.component),n=h(e.args,a,s,r),t=b(e.args,a,r),l=i||e.title.split("/").at(-1),o=t?`<${l} ${n}> ${t} </${l}>`:`<${l} ${n} />`,u=Object.entries(r.scriptVariables).map(([d,y])=>`const ${d} = ${y};`).join(`

`),p=Object.entries(r.imports).map(([d,y])=>`import { ${Array.from(y.values()).sort().join(", ")} } from "${d}";`).join(`
`),g=`<template>
  ${o}
</template>`;return!p&&!u?g:`<script lang="ts" setup>
${p?`${p}

${u}`:u}
<\/script>

${g}`},q=e=>{let r=e?.parameters.docs?.source;if(r?.type===m.SourceType.DYNAMIC)return!1;let i=e?.parameters.__isArgsStory;return e?.viewMode!=="docs"||!i||r?.code||r?.type===m.SourceType.CODE},M=e=>{if(!e||!("__docgenInfo"in e)||!e.__docgenInfo||typeof e.__docgenInfo!="object")return{displayName:e?.__name,eventNames:[],slotNames:[]};let r=e.__docgenInfo,i="displayName"in r&&typeof r.displayName=="string"?r.displayName:void 0,a=s=>!(s in r)||!Array.isArray(r[s])?[]:r[s].map(n=>n&&typeof n=="object"&&"name"in n?n.name:void 0).filter(n=>typeof n=="string");return{displayName:i||e.__name,slotNames:a("slots").sort((s,n)=>s==="default"?-1:n==="default"?1:s.localeCompare(n)),eventNames:a("events")}},h=(e,r,i,a)=>{let s=[];Object.entries(e).forEach(([t,l])=>{if(!r.includes(t)&&l!=null)switch(typeof l){case"string":if(l==="")return;s.push({name:t,value:l.includes('"')?`'${l}'`:`"${l}"`,templateFn:(o,u)=>`${o}=${u}`});break;case"number":s.push({name:t,value:l.toString(),templateFn:(o,u)=>`:${o}="${u}"`});break;case"bigint":s.push({name:t,value:`BigInt(${l.toString()})`,templateFn:(o,u)=>`:${o}="${u}"`});break;case"boolean":s.push({name:t,value:l?"true":"false",templateFn:(o,u)=>u==="true"?o:`:${o}="false"`});break;case"symbol":s.push({name:t,value:`Symbol(${l.description?`'${l.description}'`:""})`,templateFn:(o,u)=>`:${o}="${u}"`});break;case"object":{s.push({name:t,value:P(l),templateFn:void 0});break}}}),s.sort((t,l)=>t.name.localeCompare(l.name));let n=[];return s.forEach(t=>{let l=i.includes(`update:${t.name}`);if(!l&&t.templateFn){n.push(t.templateFn(t.name,t.value));return}let o=t.name;if(o in a.scriptVariables){let u=1;do o=`${t.name}${u}`,u++;while(o in a.scriptVariables)}if(!l){a.scriptVariables[o]=t.value,n.push(`:${t.name}="${o}"`);return}a.scriptVariables[o]=`ref(${t.value})`,a.imports.vue||(a.imports.vue=new Set),a.imports.vue.add("ref"),t.name==="modelValue"?n.push(`v-model="${o}"`):n.push(`v-model:${t.name}="${o}"`)}),n.join(" ")},b=(e,r,i)=>{let a=[];return r.forEach(s=>{let n=e[s];if(!n)return;let t=f([n],i);if(!t)return;let l=typeof n=="function"?S(n):[];s==="default"&&!l.length?a.push(t):a.push(`<template ${w(s,l)}>${t}</template>`)}),a.join(`

`)},f=(e,r)=>{let i=[],a=s=>{if($.isVNode(s))return F(s,r);switch(typeof s){case"string":case"number":case"boolean":return s.toString();case"object":return s===null?"":Array.isArray(s)?s.map(a).filter(n=>n!=="").join(`
`):JSON.stringify(s);case"function":{let n=S(s).filter(u=>!["{","}"].includes(u)),t=n.reduce((u,p)=>(u[p]=`{{ ${p} }}`,u),{}),l=s(t),o=f([l],r);return n.forEach(u=>{o=o.replaceAll(new RegExp(` (\\S+)="{{ ${u} }}"`,"g"),` :$1="${u}"`)}),o}case"bigint":return`{{ BigInt(${s.toString()}) }}`;default:return""}};return e.forEach(s=>{let n=a(s);n!==""&&i.push(n)}),i.join(`
`)},F=(e,r)=>{let i=k(e),a="";typeof e.children=="string"?a=e.children:Array.isArray(e.children)?a=f(e.children,r):e.children&&(a=b(e.children,Object.keys(e.children).filter(n=>n!=="$stable"),r));let s=e.props?h(e.props,[],[],r):"";return a?`<${i}${s?` ${s}`:""}>${a}</${i}>`:`<${i}${s?` ${s}`:""} />`},k=e=>{if(typeof e.type=="string")return e.type;if(typeof e.type=="object"){if("name"in e.type&&e.type.name)return e.type.name;if("__name"in e.type&&e.type.__name)return e.type.__name}return"component"},S=e=>{let r=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,i=/([^\s,]+)/g,a=e.toString().replace(r,""),s=a.slice(a.indexOf("(")+1,a.indexOf(")")).match(i);return s?s.flatMap(n=>{if(["{","}"].includes(n))return n;let t=n.split(":")[0].trim();return t.startsWith("{")?["{",t.substring(1)]:n.endsWith("}")&&!t.endsWith("}")?[t,"}"]:t}):[]},w=(e,r)=>r.length?r.length===1?`#${e}="${r[0]}"`:`#${e}="{ ${r.filter(i=>!["{","}"].includes(i)).join(", ")} }"`:`#${e}`,P=e=>Object.values(e).every(r=>r==null||typeof r!="object")?JSON.stringify(e):JSON.stringify(e,null,2),R={docs:{story:{inline:!0},extractArgTypes:j,extractComponentDescription:m.extractComponentDescription}},W=[V],B=[m.enhanceArgTypes];exports.argTypesEnhancers=B;exports.decorators=W;exports.parameters=R;
